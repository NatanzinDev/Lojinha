#{extends 'main.html' /}
#{set title:'Nega Biju' /}

<link rel="stylesheet" media="screen" href="@{'/public/stylesheets/editar.css'}">

 <div class="container">

        <div class="product-detail-container">
            <div class="product-image-section">
                <img src="${produto.foto}" alt="${produto.nome}">
            </div>
            <div class="product-info-section">
                <h1 class="product-title">${produto.nome}</h1>
                
                <p class="product-price">R$ ${produto.preco.format('###,##0.00')}</p>
                
                <p class="product-description">${produto.descricao}</p>
                
                <a href="#" class="btn-add-to-cart">Adicionar ao Carrinho</a>
            </div>
        </div>

      <div class="reviews-section">
            <h2 class="reviews-title">Avaliações do Produto</h2>

            #{if avaliacao.size() > 0}
                <div class="reviews-list">
                    #{list items:avaliacao, as:'a'}
                        <div class="review-card">
                            <h3 class="review-author"><i class='bx bxs-user-circle'></i>${a.usuario}</h3>
                            <p class="review-text">${a.mensagem}</p>
                        </div>
                    #{/list}
                </div>
                 <div class="new-review-section">
            <h2 class="section-title">Deixe sua Avaliação</h2>
            <form class="review-form" action="@{Compras.salvaravaliacao}" method="POST">
                
                <input type="hidden" name="a.produto.id" value="${produto.id}">
                
                <div class="form-group">
                    <label for="nome">Seu nome</label>
                    <input type="text" id="nome" name="a.usuario" required>
                </div>
                
                <div class="form-group">
                    <label for="mensagem">Sua mensagem</label>
                    <textarea id="mensagem" name="a.mensagem" required maxlength="1000"></textarea>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="btn-submit">Enviar Avaliação</button>
                </div>
            </form>
        </div>
            #{/if}
            #{else}
                <p class="no-reviews">Este produto ainda não possui avaliações. Seja o primeiro a avaliar!</p>
                 <div class="new-review-section">
            <h2 class="section-title">Deixe sua Avaliação</h2>
            <form class="review-form" action="@{Compras.salvaravaliacao}" method="POST">
                
                <input type="hidden" name="a.produto.id" value="${produto.id}">
                
                <div class="form-group">
                    <label for="nome">Seu nome</label>
                    <input type="text" id="nome" name="a.usuario" required>
                </div>
                
                <div class="form-group">
                    <label for="mensagem">Sua mensagem</label>
                    <textarea id="mensagem" name="a.mensagem" required maxlength="1000"></textarea>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="btn-submit">Enviar Avaliação</button>
                </div>
            </form>
        </div> 
                
            #{/else}
        </div>

    </div>